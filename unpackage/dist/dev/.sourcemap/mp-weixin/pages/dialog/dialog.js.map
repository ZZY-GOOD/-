{"version":3,"file":"dialog.js","sources":["pages/dialog/dialog.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGlhbG9nL2RpYWxvZy52dWU"],"sourcesContent":["<template>\n\t<view class=\"dialog-page\">\n\t\t<!-- 头部信息 -->\n\t\t<view class=\"scene-header\" v-if=\"scene\">\n\t\t\t<view class=\"scene-title\">{{ scene.title }}</view>\n\t\t\t<view class=\"meta-row\">\n\t\t\t\t<view class=\"meta-item\">\n\t\t\t\t\t<text class=\"meta-label\">原谅值</text>\n\t\t\t\t\t<view class=\"bar\">\n\t\t\t\t\t\t<view class=\"bar-fill\" :style=\"{ width: forgivenessPercent + '%' }\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"meta-value\">{{ forgiveness }}/100</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"meta-item turns\">\n\t\t\t\t\t<text class=\"meta-label\">聊天轮次</text>\n\t\t\t\t\t<text class=\"meta-value\">{{ currentTurn }}/{{ maxTurns }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 聊天区 -->\n\t\t<scroll-view class=\"chat-list\" :class=\"{ 'game-ended': gameEnded }\" :scroll-y=\"true\" scroll-with-animation :scroll-into-view=\"lastMsgId\">\n\t\t\t<view\n\t\t\t\tv-for=\"(msg, idx) in messages\"\n\t\t\t\t:key=\"msg.id\"\n\t\t\t\t:id=\"msg.id\"\n\t\t\t\tclass=\"chat-item\"\n\t\t\t\t:class=\"msg.role\"\n\t\t\t>\n\t\t\t\t<image class=\"avatar\" :src=\"msg.role === 'ai' ? aiAvatar : userAvatar\" mode=\"aspectFill\" />\n\t\t\t\t<view class=\"bubble\">\n\t\t\t\t\t<text class=\"msg-text\">{{ msg.text }}</text>\n\t\t\t\t\t<text v-if=\"msg.forgivenessChange\" class=\"forgive-change\">{{ msg.forgivenessChange }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</scroll-view>\n\n\t\t<!-- 游戏结束提示 -->\n\t\t<view v-if=\"gameEnded\" class=\"result-banner\" :class=\"gameResult.success ? 'success' : 'failed'\">\n\t\t\t<text class=\"result-text\">{{ gameResult.message }}</text>\n\t\t</view>\n\n\t\t<!-- 输入区（游戏进行中） -->\n\t\t<view v-if=\"!gameEnded\" class=\"input-area\">\n\t\t\t<textarea\n\t\t\t\tclass=\"text-input multiline\"\n\t\t\t\tv-model=\"inputText\"\n\t\t\t\t:disabled=\"actionLocked\"\n\t\t\t\tplaceholder=\"快，说点什么\"\n\t\t\t\tauto-height\n\t\t\t\t:maxlength=\"-1\"\n\t\t\t/>\n\t\t\t<button class=\"send-btn\" type=\"primary\" :disabled=\"actionLocked\" @click=\"handleSend\">发送</button>\n\t\t</view>\n\n\t\t<!-- 操作按钮（游戏结束后） -->\n\t\t<view v-if=\"gameEnded\" class=\"action-buttons\">\n\t\t\t<button class=\"action-btn restart-btn\" @click=\"handleRestart\">重开</button>\n\t\t\t<button class=\"action-btn return-btn\" @click=\"handleReturn\">返回</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { sceneService, gameRecordService } from '@/utils/supabase-helper.js'\nimport { generateReply } from '@/utils/ai-service.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tsceneId: '',\n\t\t\tscene: null,\n\t\t\tloading: false,\n\t\t\tinputText: '',\n\t\t\tforgiveness: 0,\n\t\t\tstartForgiveness: 0,\n\t\t\tmaxTurns: 10,\n\t\t\tcurrentTurn: 0,\n\t\t\tmessages: [],\n\t\t\tuserAvatar: '/static/user.png', // 默认头像，会在 onLoad 时从本地存储读取用户头像\n\t\t\taiAvatar: '/static/user.png', // TODO: 需要添加 /static/logo.png 作为 AI 头像\n\t\t\tactionLocked: false,\n\t\t\tlastMsgId: '',\n\t\t\tuserId: '',\n\t\t\tforgivenessChanges: [],\n\t\t\tstartTimestamp: 0,\n\t\t\trecordSaved: false,\n\t\t\tgameEnded: false,\n\t\t\tgameResult: {\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: ''\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tforgivenessPercent() {\n\t\t\tconst val = Math.max(0, Math.min(100, this.forgiveness))\n\t\t\treturn val\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tif (!options || !options.id) {\n\t\t\tuni.showToast({ title: '缺少场景ID', icon: 'none' })\n\t\t\treturn\n\t\t}\n\t\tthis.sceneId = options.id\n\t\tthis.loadUser()\n\t\tthis.initScene()\n\t},\n\tmethods: {\n\t\tloadUser() {\n\t\t\tconst storedAvatar = uni.getStorageSync('userAvatar')\n\t\t\tif (storedAvatar) {\n\t\t\t\tthis.userAvatar = storedAvatar\n\t\t\t} else {\n\t\t\t\tthis.userAvatar = '/static/user.png'\n\t\t\t}\n\t\t\tconst storedId = uni.getStorageSync('userId')\n\t\t\tthis.userId = storedId || this.genAnonId()\n\t\t\tif (!storedId) {\n\t\t\t\tuni.setStorageSync('userId', this.userId)\n\t\t\t}\n\t\t},\n\t\tgenAnonId() {\n\t\t\treturn `guest-${Math.random().toString(16).slice(2, 10)}`\n\t\t},\n\t\tasync initScene() {\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tconst { data, error } = await sceneService.getSceneById(this.sceneId)\n\t\t\t\tif (error || !data) {\n\t\t\t\t\tuni.showToast({ title: '加载场景失败', icon: 'none' })\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.scene = data\n\t\t\t\tthis.forgiveness = data.initial_forgiveness ?? 40\n\t\t\t\tthis.startForgiveness = this.forgiveness\n\t\t\t\tthis.maxTurns = data.max_interactions || 10\n\t\t\t\tthis.currentTurn = 0\n\t\t\t\tthis.messages = []\n\t\t\t\tthis.forgivenessChanges = []\n\t\t\t\tthis.recordSaved = false\n\t\t\t\tthis.gameEnded = false\n\t\t\t\tthis.gameResult = { success: false, message: '' }\n\t\t\t\tthis.actionLocked = false\n\t\t\t\tthis.startTimestamp = Date.now()\n\t\t\t\tthis.appendMessage('ai', data.angry_reason || data.title || '我现在很生气，你说说看。')\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err)\n\t\t\t\tuni.showToast({ title: '加载失败', icon: 'none' })\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t\tappendMessage(role, text, forgivenessChange = '') {\n\t\t\tconst id = `msg-${Date.now()}-${Math.random().toString(16).slice(2)}`\n\t\t\tthis.messages.push({ id, role, text, forgivenessChange })\n\t\t\tthis.lastMsgId = id\n\t\t},\n\t\tasync handleSend() {\n\t\t\tif (this.actionLocked) return\n\t\t\tconst content = this.inputText.trim()\n\t\t\tif (!content) {\n\t\t\t\tuni.showToast({ title: '请输入内容', icon: 'none' })\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.inputText = ''\n\t\t\tthis.currentTurn++\n\t\t\tthis.appendMessage('user', content)\n\t\t\tthis.actionLocked = true\n\t\t\ttry {\n\t\t\t\t// 组装历史消息（仅取最近 10 条）\n\t\t\t\tconst history = this.messages.slice(-10).map(m => ({\n\t\t\t\t\trole: m.role === 'ai' ? 'assistant' : 'user',\n\t\t\t\t\tcontent: m.text\n\t\t\t\t}))\n\n\t\t\t\tconst aiRes = await generateReply({\n\t\t\t\t\tscene: this.scene,\n\t\t\t\t\thistory,\n\t\t\t\t\tuserInput: content,\n\t\t\t\t\tforgiveness: this.forgiveness\n\t\t\t\t})\n\n\t\t\t\t// AI 不可用：不消耗轮次、不改变原谅值，仅提示\n\t\t\t\tif (aiRes && aiRes.error) {\n\t\t\t\t\tthis.currentTurn = Math.max(0, this.currentTurn - 1)\n\t\t\t\t\tthis.appendMessage('ai', 'AI 暂时不能使用，请稍后再试。')\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst { reply, forgivenessDelta } = aiRes || {}\n\t\t\t\t// AI 返回缺字段也视为不可用\n\t\t\t\tif (typeof reply !== 'string' || !reply.trim() || !Number.isFinite(forgivenessDelta)) {\n\t\t\t\t\tthis.currentTurn = Math.max(0, this.currentTurn - 1)\n\t\t\t\t\tthis.appendMessage('ai', 'AI 暂时不能使用，请稍后再试。')\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tconst delta = forgivenessDelta\n\n\t\t\t\tthis.forgiveness = this.clampForgiveness(this.forgiveness + delta)\n\t\t\t\tthis.forgivenessChanges.push({\n\t\t\t\t\tround: this.currentTurn,\n\t\t\t\t\tchange: delta,\n\t\t\t\t\tfinal: this.forgiveness\n\t\t\t\t})\n\t\t\t\tconst changeText = delta >= 0 ? `原谅值 +${delta}` : `原谅值 ${delta}`\n\t\t\t\tthis.appendMessage('ai', reply, changeText)\n\t\t\t\tthis.checkResult()\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('AI 处理异常:', err)\n\t\t\t\t// 异常同样视为 AI 不可用：不消耗轮次、不改变原谅值，仅提示\n\t\t\t\tthis.currentTurn = Math.max(0, this.currentTurn - 1)\n\t\t\t\tthis.appendMessage('ai', 'AI 暂时不能使用，请稍后再试。')\n\t\t\t} finally {\n\t\t\t\tthis.actionLocked = false\n\t\t\t}\n\t\t},\n\t\tclampForgiveness(val) {\n\t\t\treturn Math.max(0, Math.min(100, val))\n\t\t},\n\t\tcheckResult() {\n\t\t\tif (this.forgiveness >= 100) {\n\t\t\t\tthis.forgiveness = 100\n\t\t\t\tthis.showResult(true)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (this.forgiveness <= 0) {\n\t\t\t\tthis.forgiveness = 0\n\t\t\t\tthis.showResult(false)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (this.currentTurn >= this.maxTurns) {\n\t\t\t\tthis.showResult(false, '已用完所有对话次数')\n\t\t\t}\n\t\t},\n\t\tshowResult(success, reason = '') {\n\t\t\tthis.actionLocked = true\n\t\t\tthis.gameEnded = true\n\t\t\tthis.persistRecord(success)\n\t\t\t\n\t\t\tif (success) {\n\t\t\t\tthis.gameResult = {\n\t\t\t\t\tsuccess: true,\n\t\t\t\t\tmessage: '恭喜，哄好了！原谅值达到 100，胜利！'\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.gameResult = {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\tmessage: reason || `挑战失败，原谅值 ${this.forgiveness}`\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thandleRestart() {\n\t\t\tthis.initScene()\n\t\t},\n\t\thandleReturn() {\n\t\t\tuni.navigateBack()\n\t\t},\n\t\tasync persistRecord(isSuccess) {\n\t\t\t// 避免重复保存\n\t\t\tif (this.recordSaved) return\n\t\t\tthis.recordSaved = true\n\n\t\t\tconst durationSeconds = this.startTimestamp\n\t\t\t\t? Math.max(0, Math.round((Date.now() - this.startTimestamp) / 1000))\n\t\t\t\t: null\n\n\t\t\ttry {\n\t\t\t\tawait gameRecordService.createRecord({\n\t\t\t\t\tuserId: this.userId || this.genAnonId(),\n\t\t\t\t\tsceneId: this.sceneId,\n\t\t\t\t\tisSuccess,\n\t\t\t\t\tfinalForgiveness: this.forgiveness,\n\t\t\t\t\tinteractionCount: this.currentTurn,\n\t\t\t\t\tmaxInteractions: this.maxTurns,\n\t\t\t\t\tstartForgiveness: this.startForgiveness,\n\t\t\t\t\tforgivenessChanges: this.forgivenessChanges,\n\t\t\t\t\tdurationSeconds\n\t\t\t\t})\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('保存游戏记录失败:', err)\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.dialog-page {\n\tmin-height: 100vh;\n\tbackground-color: #f5f6fa;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.scene-header {\n\tpadding: 20rpx 24rpx 0 24rpx;\n}\n\n.scene-title {\n\tfont-size: 32rpx;\n\tfont-weight: 700;\n\tcolor: #222;\n\tmargin-bottom: 12rpx;\n}\n\n.meta-row {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 20rpx;\n}\n\n.meta-item {\n\tflex: 1;\n}\n\n.meta-label {\n\tfont-size: 24rpx;\n\tcolor: #666;\n\tmargin-bottom: 8rpx;\n\tdisplay: block;\n}\n\n.bar {\n\twidth: 100%;\n\theight: 12rpx;\n\tbackground: #e5e7eb;\n\tborder-radius: 12rpx;\n\toverflow: hidden;\n}\n\n.bar-fill {\n\theight: 100%;\n\tbackground: #ff6b6b;\n}\n\n.meta-value {\n\tfont-size: 24rpx;\n\tcolor: #333;\n\tmargin-top: 6rpx;\n\tdisplay: inline-block;\n}\n\n.turns {\n\tflex: 0 0 180rpx;\n\ttext-align: right;\n}\n\n.chat-list {\n\tflex: 1;\n\tpadding: 20rpx 16rpx;\n\tpadding-bottom: 140rpx;\n}\n\n/* 游戏结束时增加底部间距，避免被横幅遮挡 */\n.chat-list.game-ended {\n\tpadding-bottom: 280rpx;\n}\n\n.chat-item {\n\tdisplay: flex;\n\tmargin-bottom: 20rpx;\n}\n\n.chat-item.user {\n\tflex-direction: row-reverse;\n}\n\n.avatar {\n\twidth: 64rpx;\n\theight: 64rpx;\n\tborder-radius: 50%;\n\tmargin: 0 12rpx;\n\tbackground: #ddd;\n}\n\n.bubble {\n\tmax-width: 80%;\n\tpadding: 18rpx 20rpx;\n\tborder-radius: 20rpx;\n\tbackground: #fff;\n\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.04);\n\tcolor: #333;\n\tfont-size: 28rpx;\n\tline-height: 40rpx;\n}\n\n.chat-item.user .bubble {\n\tbackground: #4f46e5;\n\tcolor: #fff;\n}\n\n.msg-text {\n\tdisplay: block;\n}\n\n.forgive-change {\n\tdisplay: block;\n\tmargin-top: 8rpx;\n\tfont-size: 24rpx;\n\tcolor: #888;\n}\n\n.chat-item.user .forgive-change {\n\tcolor: #e5e7eb;\n}\n\n.input-area {\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tpadding: 12rpx 16rpx;\n\tbackground: #fff;\n\tbox-shadow: 0 -4rpx 10rpx rgba(0, 0, 0, 0.06);\n\tdisplay: flex;\n\talign-items: flex-end;\n\tgap: 12rpx;\n}\n\n.text-input {\n\tflex: 1;\n\tmin-height: 88rpx;\n\tbackground: #f5f5f5;\n\tborder-radius: 12rpx;\n\tpadding: 12rpx 16rpx;\n\tfont-size: 28rpx;\n\tline-height: 42rpx;\n\tbox-sizing: border-box;\n}\n\n.text-input.multiline {\n\tmax-height: 220rpx;\n}\n\n.send-btn {\n\theight: 88rpx;\n\tline-height: 88rpx;\n\tpadding: 0 32rpx;\n\tfont-size: 28rpx;\n\tborder-radius: 12rpx;\n\tbackground: linear-gradient(135deg, #4f46e5, #7c3aed);\n\tborder: none;\n}\n\n/* 游戏结束提示 */\n.result-banner {\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\tbottom: 148rpx;\n\tpadding: 20rpx 24rpx;\n\tbackground: rgba(0, 0, 0, 0.8);\n\tz-index: 100;\n\ttext-align: center;\n}\n\n.result-banner.success {\n\tbackground: rgba(16, 185, 129, 0.9);\n}\n\n.result-banner.failed {\n\tbackground: rgba(239, 68, 68, 0.9);\n}\n\n.result-text {\n\tfont-size: 28rpx;\n\tcolor: #fff;\n\tfont-weight: 500;\n}\n\n/* 操作按钮区域 */\n.action-buttons {\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tpadding: 20rpx 24rpx;\n\tbackground: #fff;\n\tbox-shadow: 0 -4rpx 10rpx rgba(0, 0, 0, 0.06);\n\tdisplay: flex;\n\tgap: 20rpx;\n\tz-index: 99;\n}\n\n.action-btn {\n\tflex: 1;\n\theight: 88rpx;\n\tline-height: 88rpx;\n\tborder-radius: 12rpx;\n\tfont-size: 30rpx;\n\tborder: none;\n}\n\n.restart-btn {\n\tbackground: #4f46e5;\n\tcolor: #fff;\n}\n\n.restart-btn:active {\n\tbackground: #4338ca;\n}\n\n.return-btn {\n\tbackground: #f5f5f5;\n\tcolor: #333;\n}\n\n.return-btn:active {\n\tbackground: #e0e0e0;\n}\n</style>\n\n","import MiniProgramPage from 'D:/Hbuilder/HBuilderX.4.76.2025082103/project/first/pages/dialog/dialog.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","sceneService","generateReply","gameRecordService"],"mappings":"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"}