{"version":3,"file":"profile.js","sources":["pages/profile/profile.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9wcm9maWxlLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"page\">\r\n\t\t<!-- 顶部个人信息展示 -->\r\n\t\t<view class=\"profile-card\">\r\n\t\t\t<image class=\"avatar\" :src=\"avatar\" mode=\"aspectFill\" />\r\n\t\t\t<view class=\"profile-info\">\r\n\t\t\t\t<text class=\"name\">{{ nickname || '未命名用户' }}</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 清除数据按钮（测试用） -->\r\n\t\t\t<view class=\"clear-btn\" @click=\"clearUserData\">清除登录</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 数据卡片（仅展示） -->\r\n\t\t<view class=\"stats-card\">\r\n\t\t\t<view class=\"stats-title\">挑战数据</view>\r\n\t\t\t<view class=\"stats-row\">\r\n\t\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t\t<text class=\"stat-value\">{{ stats.totalGames }}</text>\r\n\t\t\t\t\t<text class=\"stat-label\">总挑战</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t\t<text class=\"stat-value\">{{ stats.successCount }}</text>\r\n\t\t\t\t\t<text class=\"stat-label\">成功次数</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t\t<text class=\"stat-value\">{{ stats.successRate }}%</text>\r\n\t\t\t\t\t<text class=\"stat-label\">成功率</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t\t<text class=\"stat-value\">{{ stats.uniqueScenes }}</text>\r\n\t\t\t\t\t<text class=\"stat-label\">玩过场景</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 挑战记录（展示） -->\r\n\t\t<view class=\"records-card\">\r\n\t\t\t<view class=\"records-title\">最近挑战</view>\r\n\t\t\t<view v-if=\"records.length === 0\" class=\"empty\">暂无记录</view>\r\n\t\t\t<view\r\n\t\t\t\tv-else\r\n\t\t\t\tclass=\"record-item\"\r\n\t\t\t\tv-for=\"(rec, idx) in records\"\r\n\t\t\t\t:key=\"idx\"\r\n\t\t\t\t@click=\"handleRecordClick(rec)\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"record-main\">\r\n\t\t\t\t\t<view class=\"rec-top\">\r\n\t\t\t\t\t\t<text class=\"rec-title\">{{ rec.sceneTitle || '未知场景' }}</text>\r\n\t\t\t\t\t\t<text class=\"rec-result\" :class=\"rec.is_success ? 'ok' : 'fail'\">\r\n\t\t\t\t\t\t\t{{ rec.is_success ? '成功' : '失败' }}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"rec-sub\">\r\n\t\t\t\t\t\t<text>原谅值：{{ rec.final_forgiveness ?? '--' }}</text>\r\n\t\t\t\t\t\t<text>轮次：{{ rec.interaction_count ?? '--' }}</text>\r\n\t\t\t\t\t\t<text>{{ rec.created_at ? rec.created_at.split('T')[0] : '' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"rec-action\">\r\n\t\t\t\t\t<text class=\"rec-cta\">再挑战</text>\r\n\t\t\t\t\t<text class=\"rec-arrow\">›</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部选择弹窗 -->\r\n\t\t<view v-if=\"showBottomSheet\" class=\"bottom-sheet-mask\" @click=\"closeBottomSheet\">\r\n\t\t\t<view class=\"bottom-sheet\" @click.stop>\r\n\t\t\t\t<view class=\"sheet-title\">{{ bottomSheetTitle }}</view>\r\n\t\t\t\t<view class=\"sheet-options\">\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tv-for=\"(option, index) in bottomSheetOptions\" \r\n\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\tclass=\"sheet-option\"\r\n\t\t\t\t\t\t@click=\"handleBottomOption(index)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<image v-if=\"option.avatar\" class=\"option-avatar\" :src=\"option.avatar\" mode=\"aspectFill\" />\r\n\t\t\t\t\t\t<text class=\"option-text\">{{ option.text }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"sheet-cancel\" @click=\"closeBottomSheet\">取消</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 输入昵称弹窗 -->\r\n\t\t<view v-if=\"showNameInput\" class=\"modal-mask\" @click=\"closeNameInput\">\r\n\t\t\t<view class=\"modal\" @click.stop>\r\n\t\t\t\t<view class=\"modal-title\">输入昵称</view>\r\n\t\t\t\t<input class=\"modal-input\" v-model=\"inputName\" placeholder=\"请输入昵称\" maxlength=\"20\" />\r\n\t\t\t\t<view class=\"modal-actions\">\r\n\t\t\t\t\t<button size=\"mini\" @click=\"closeNameInput\">取消</button>\r\n\t\t\t\t\t<button size=\"mini\" type=\"primary\" @click=\"confirmNameInput\">确认</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"bottom-space\" />\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { gameRecordService, userService } from '@/utils/supabase-helper.js'\r\n\r\nexport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuserId: '',\r\n\t\t\t\tnickname: '',\r\n\t\t\t\tavatar: '/static/user.png',\r\n\t\t\t\tstats: {\r\n\t\t\t\t\ttotalGames: 0,\r\n\t\t\t\t\tsuccessCount: 0,\r\n\t\t\t\t\tsuccessRate: 0,\r\n\t\t\t\t\tuniqueScenes: 0\r\n\t\t\t\t},\r\n\t\t\t\trecords: [],\r\n\t\t\t\tshowBottomSheet: false,\r\n\t\t\t\tbottomSheetTitle: '',\r\n\t\t\t\tbottomSheetOptions: [],\r\n\t\t\tselectedAvatar: '', // 已选择的头像\r\n\t\t\tshowNameInput: false,\r\n\t\t\tinputName: '',\r\n\t\t\tloginType: 'guest' // 登录类型：wx 或 guest\r\n\t\t\t}\r\n\t\t},\r\n\tonShow() {\r\n\t\tthis.loadUser()\r\n\t\tthis.loadStats()\r\n\t\tthis.loadRecords()\r\n\t\tif (!this.userId || !this.nickname || !this.avatar) {\r\n\t\t\tthis.promptLogin()\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tloadUser() {\r\n\t\t\tconst storedId = uni.getStorageSync('userId') || ''\r\n\t\t\tconst storedName = uni.getStorageSync('userName') || ''\r\n\t\t\tconst storedAvatar = uni.getStorageSync('userAvatar') || ''\r\n\t\t\tthis.userId = storedId || this.genAnonId()\r\n\t\t\tthis.nickname = storedName || ''\r\n\t\t\tif (storedAvatar) this.avatar = storedAvatar\r\n\t\t},\r\n\t\tasync saveUser() {\r\n\t\t\t// 保存到本地存储\r\n\t\t\tconst finalUserId = this.userId || this.genAnonId()\r\n\t\t\tuni.setStorageSync('userId', finalUserId)\r\n\t\t\tuni.setStorageSync('userName', this.nickname || '')\r\n\t\t\tuni.setStorageSync('userAvatar', this.avatar || '/static/user.png')\r\n\t\t\tuni.setStorageSync('loginType', this.loginType || 'guest')\r\n\t\t\t\r\n\t\t\t// 保存到 Supabase 数据库\r\n\t\t\ttry {\r\n\t\t\t\tconst { data, error } = await userService.createOrUpdateUser({\r\n\t\t\t\t\tuserId: this.userId || this.genAnonId(),\r\n\t\t\t\t\tnickname: this.nickname,\r\n\t\t\t\t\tavatarUrl: this.avatar !== '/static/user.png' ? this.avatar : null,\r\n\t\t\t\t\tloginType: this.loginType || 'guest'\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (error) {\r\n\t\t\t\t\tconsole.error('保存用户信息到数据库失败:', error)\r\n\t\t\t\t\t// 即使数据库保存失败，本地存储已成功，仍然提示成功\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('保存用户信息异常:', err)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tuni.showToast({ title: '已保存', icon: 'success' })\r\n\t\t},\r\n\t\tgenAnonId() {\r\n\t\t\tconst id = `guest-${Math.random().toString(16).slice(2, 10)}`\r\n\t\t\tthis.userId = id\r\n\t\t\treturn id\r\n\t\t},\r\n\t\tpromptLogin() {\r\n\t\t\tthis.bottomSheetTitle = '选择登录方式'\r\n\t\t\tthis.bottomSheetOptions = [\r\n\t\t\t\t{ text: '微信授权登录', type: 'wx' },\r\n\t\t\t\t{ text: '手动填写', type: 'manual' }\r\n\t\t\t]\r\n\t\t\tthis.showBottomSheet = true\r\n\t\t},\r\n\t\thandleBottomOption(index) {\r\n\t\t\tconst option = this.bottomSheetOptions[index]\r\n\t\t\tif (option.type === 'wx') {\r\n\t\t\t\tthis.wxAuthorize()\r\n\t\t\t\tthis.closeBottomSheet()\r\n\t\t\t} else if (option.type === 'manual') {\r\n\t\t\t\t// 切换到手动填写选项\r\n\t\t\t\tthis.showManualOptions()\r\n\t\t\t} else if (option.type === 'avatar') {\r\n\t\t\t\tthis.chooseAvatarFromAlbum()\r\n\t\t\t} else if (option.type === 'name') {\r\n\t\t\t\tthis.closeBottomSheet()\r\n\t\t\t\tthis.showNameInput = true\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowManualOptions() {\r\n\t\t\tthis.bottomSheetTitle = '手动填写资料'\r\n\t\t\tthis.bottomSheetOptions = [\r\n\t\t\t\t{ \r\n\t\t\t\t\ttext: this.selectedAvatar ? '已选择头像' : '从相册选择头像', \r\n\t\t\t\t\ttype: 'avatar',\r\n\t\t\t\t\tavatar: this.selectedAvatar || null\r\n\t\t\t\t},\r\n\t\t\t\t{ text: '输入昵称', type: 'name' }\r\n\t\t\t]\r\n\t\t\t// 不关闭，直接更新选项\r\n\t\t},\r\n\t\tcloseBottomSheet() {\r\n\t\t\tthis.showBottomSheet = false\r\n\t\t\tthis.bottomSheetTitle = ''\r\n\t\t\tthis.bottomSheetOptions = []\r\n\t\t},\r\n\t\twxAuthorize() {\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t// 直接调用 getUserProfile，微信会弹出系统授权弹窗（带“拒绝 / 允许”按钮）\r\n\t\t\tuni.getUserProfile({\r\n\t\t\t\tdesc: '用于完善个人资料',\r\n\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\tif (res.userInfo) {\r\n\t\t\t\t\t\tthis.nickname = res.userInfo.nickName || this.nickname\r\n\t\t\t\t\t\tthis.avatar = res.userInfo.avatarUrl || this.avatar\r\n\t\t\t\t\t\tthis.loginType = 'wx'\r\n\t\t\t\t\t\tawait this.saveUser()\r\n\t\t\t\t\t\tthis.closeBottomSheet()\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.log('getUserProfile fail', err) // 打印具体错误\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: (err && err.errMsg) ? err.errMsg : '授权失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// #endif\r\n\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\tuni.showToast({ title: '仅支持微信小程序', icon: 'none' })\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tchangeAvatar() {\r\n\t\t\t// 个人中心页面头像不可点击编辑\r\n\t\t},\r\n\t\tasync chooseAvatarFromAlbum() {\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: 1,\r\n\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\tsourceType: ['album'],\r\n\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\tif (res.tempFilePaths && res.tempFilePaths.length > 0) {\r\n\t\t\t\t\t\tthis.selectedAvatar = res.tempFilePaths[0]\r\n\t\t\t\t\t\tthis.avatar = res.tempFilePaths[0]\r\n\t\t\t\t\t\t// 更新底部选择中的头像显示\r\n\t\t\t\t\t\tthis.showManualOptions()\r\n\t\t\t\t\t\t// 如果昵称也有了，自动保存并关闭\r\n\t\t\t\t\t\tif (this.nickname) {\r\n\t\t\t\t\t\t\tthis.loginType = 'guest'\r\n\t\t\t\t\t\t\tawait this.saveUser()\r\n\t\t\t\t\t\t\tthis.closeBottomSheet()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 头像已选，提示填写昵称\r\n\t\t\t\t\t\t\tuni.showToast({ title: '头像已选择，请填写昵称', icon: 'none' })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tcloseNameInput() {\r\n\t\t\tthis.showNameInput = false\r\n\t\t\tthis.inputName = ''\r\n\t\t},\r\n\t\tasync confirmNameInput() {\r\n\t\t\tif (!this.inputName.trim()) {\r\n\t\t\t\tuni.showToast({ title: '请输入昵称', icon: 'none' })\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.nickname = this.inputName.trim()\r\n\t\t\tthis.loginType = 'guest'\r\n\t\t\t// 如果头像也有了，自动保存\r\n\t\t\tif (this.selectedAvatar) {\r\n\t\t\t\tthis.avatar = this.selectedAvatar\r\n\t\t\t\tawait this.saveUser()\r\n\t\t\t} else {\r\n\t\t\t\t// 昵称已填，提示选择头像\r\n\t\t\t\tuni.showToast({ title: '昵称已保存，请选择头像', icon: 'none' })\r\n\t\t\t\t// 重新打开底部选择，显示手动填写选项\r\n\t\t\t\tthis.showManualOptions()\r\n\t\t\t\tthis.showBottomSheet = true\r\n\t\t\t}\r\n\t\t\tthis.closeNameInput()\r\n\t\t},\r\n\t\tasync loadStats() {\r\n\t\t\tif (!this.userId) return\r\n\t\t\tconst { data, error } = await gameRecordService.getUserStats(this.userId)\r\n\t\t\tif (!error && data) {\r\n\t\t\t\tthis.stats = data\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync loadRecords() {\r\n\t\t\tif (!this.userId) return\r\n\t\t\tconst { data, error } = await gameRecordService.getRecentScenes(this.userId, 5)\r\n\t\t\tif (!error && data) {\r\n\t\t\t\tthis.records = data.map(r => ({\r\n\t\t\t\t\t...r,\r\n\t\t\t\t\tsceneTitle: (r.scene && r.scene.title) || r.scene_title || r.sceneId || '场景'\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleRecordClick(rec) {\r\n\t\t\tconst sceneId = rec.scene_id || rec.sceneId\r\n\t\t\tif (!sceneId) {\r\n\t\t\t\tuni.showToast({ title: '缺少场景ID', icon: 'none' })\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tuni.navigateTo({ url: `/pages/dialog/dialog?id=${sceneId}` })\r\n\t\t},\r\n\t\tclearUserData() {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '确定要清除登录信息吗？清除后需要重新登录',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t// 清除本地存储\r\n\t\t\t\t\tuni.removeStorageSync('userId')\r\n\t\t\t\t\tuni.removeStorageSync('userName')\r\n\t\t\t\t\tuni.removeStorageSync('userAvatar')\r\n\t\t\t\t\tuni.removeStorageSync('loginType')\r\n\t\t\t\t\t// 重置数据\r\n\t\t\t\t\tthis.userId = ''\r\n\t\t\t\t\tthis.nickname = ''\r\n\t\t\t\t\tthis.avatar = '/static/user.png'\r\n\t\t\t\t\tthis.selectedAvatar = ''\r\n\t\t\t\t\tthis.loginType = 'guest'\r\n\t\t\t\t\tthis.stats = {\r\n\t\t\t\t\t\ttotalGames: 0,\r\n\t\t\t\t\t\tsuccessCount: 0,\r\n\t\t\t\t\t\tsuccessRate: 0,\r\n\t\t\t\t\t\tuniqueScenes: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.records = []\r\n\t\t\t\t\t// 弹出登录选择\r\n\t\t\t\t\tthis.promptLogin()\r\n\t\t\t\t\tuni.showToast({ title: '已清除，请重新登录', icon: 'success' })\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.page {\r\n\tmin-height: 100vh;\r\n\tbackground: #f5f6fa;\r\n\tpadding: 20rpx 20rpx 40rpx 20rpx;\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.profile-card {\r\n\tbackground: #fff;\r\n\tborder-radius: 0;\r\n\tpadding: 30rpx 24rpx;\r\n\tmargin-bottom: 20rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tposition: relative;\r\n}\r\n\r\n.avatar {\r\n\twidth: 120rpx;\r\n\theight: 120rpx;\r\n\tborder-radius: 12rpx;\r\n\tbackground: #f0f0f0;\r\n\tmargin-right: 24rpx;\r\n\tflex-shrink: 0;\r\n}\r\n\r\n.profile-info {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.name {\r\n\tfont-size: 36rpx;\r\n\tfont-weight: 500;\r\n\tcolor: #333;\r\n}\r\n\r\n.clear-btn {\r\n\tposition: absolute;\r\n\ttop: 30rpx;\r\n\tright: 24rpx;\r\n\tpadding: 8rpx 16rpx;\r\n\tbackground: #f5f5f5;\r\n\tborder: 1rpx solid #e0e0e0;\r\n\tborder-radius: 8rpx;\r\n\tfont-size: 22rpx;\r\n\tcolor: #666;\r\n}\r\n\r\n.mini-btn {\r\n\tbackground: #1f2937;\r\n\tcolor: #fefefe;\r\n\tborder: 1rpx solid #2d3748;\r\n}\r\n\r\n.profile-actions {\r\n\tmargin-top: 16rpx;\r\n\tdisplay: flex;\r\n\tgap: 12rpx;\r\n}\r\n\r\n.action-btn {\r\n\tflex: 1;\r\n\tborder: 1rpx solid #2d3748;\r\n\tbackground: #1f2937;\r\n\tcolor: #fefefe;\r\n}\r\n\r\n.stats-card,\r\n.records-card {\r\n\tbackground: #fff;\r\n\tborder-radius: 16rpx;\r\n\tpadding: 20rpx;\r\n\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.04);\r\n\tmargin-bottom: 16rpx;\r\n}\r\n\r\n.stats-title,\r\n.records-title {\r\n\tfont-size: 30rpx;\r\n\tfont-weight: 600;\r\n\tcolor: #222;\r\n\tmargin-bottom: 12rpx;\r\n}\r\n\r\n.stats-row {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\tgap: 12rpx;\r\n}\r\n\r\n.stat-item {\r\n\tflex: 1;\r\n\tbackground: #f8f9fb;\r\n\tborder-radius: 12rpx;\r\n\tpadding: 16rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n.stat-value {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: 700;\r\n\tcolor: #111;\r\n\tdisplay: block;\r\n\tmargin-bottom: 4rpx;\r\n}\r\n\r\n.stat-label {\r\n\tfont-size: 24rpx;\r\n\tcolor: #777;\r\n}\r\n\r\n.record-item {\r\n\tpadding: 20rpx 16rpx;\r\n\tborder: 1rpx solid #eef1f5;\r\n\tborder-radius: 14rpx;\r\n\tbackground: linear-gradient(180deg, #ffffff 0%, #f9fbff 100%);\r\n\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.04);\r\n\tmargin-bottom: 14rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 16rpx;\r\n}\r\n\r\n.rec-top {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-bottom: 6rpx;\r\n\tgap: 12rpx;\r\n}\r\n\r\n.rec-title {\r\n\tfont-size: 28rpx;\r\n\tcolor: #222;\r\n\tfont-weight: 600;\r\n\tflex: 1;\r\n}\r\n\r\n.rec-result {\r\n\tfont-size: 24rpx;\r\n\tpadding: 4rpx 10rpx;\r\n\tborder-radius: 10rpx;\r\n\twhite-space: nowrap;\r\n}\r\n\r\n.rec-result.ok {\r\n\tbackground: #e6f6ef;\r\n\tcolor: #0f9d58;\r\n}\r\n\r\n.rec-result.fail {\r\n\tbackground: #fdecec;\r\n\tcolor: #d93025;\r\n}\r\n\r\n.rec-sub {\r\n\tfont-size: 24rpx;\r\n\tcolor: #777;\r\n\tdisplay: flex;\r\n\tgap: 20rpx;\r\n\tflex-wrap: wrap;\r\n}\r\n\r\n.empty {\r\n\tfont-size: 26rpx;\r\n\tcolor: #999;\r\n\tpadding: 12rpx 0;\r\n}\r\n\r\n.record-main {\r\n\tflex: 1;\r\n\tmin-width: 0;\r\n}\r\n\r\n.rec-action {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 6rpx;\r\n\tcolor: #4f46e5;\r\n\tfont-size: 26rpx;\r\n\tfont-weight: 600;\r\n\tpadding-left: 8rpx;\r\n}\r\n\r\n.rec-cta {\r\n\tline-height: 1;\r\n}\r\n\r\n.rec-arrow {\r\n\tfont-size: 32rpx;\r\n\tline-height: 1;\r\n}\r\n\r\n.bottom-space {\r\n\theight: 60rpx;\r\n}\r\n\r\n/* 底部选择弹窗 */\r\n.bottom-sheet-mask {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tbackground: rgba(0, 0, 0, 0.5);\r\n\tz-index: 999;\r\n\tdisplay: flex;\r\n\talign-items: flex-end;\r\n}\r\n\r\n.bottom-sheet {\r\n\twidth: 100%;\r\n\tbackground: #fff;\r\n\tborder-radius: 24rpx 24rpx 0 0;\r\n\tpadding: 20rpx 0;\r\n\tanimation: slideUp 0.3s ease-out;\r\n}\r\n\r\n@keyframes slideUp {\r\n\tfrom {\r\n\t\ttransform: translateY(100%);\r\n\t}\r\n\tto {\r\n\t\ttransform: translateY(0);\r\n\t}\r\n}\r\n\r\n.sheet-title {\r\n\tfont-size: 28rpx;\r\n\tcolor: #999;\r\n\ttext-align: center;\r\n\tpadding: 0 20rpx 20rpx;\r\n}\r\n\r\n.sheet-options {\r\n\tpadding: 0 20rpx;\r\n}\r\n\r\n.sheet-option {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding: 24rpx 0;\r\n\tborder-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.sheet-option:last-child {\r\n\tborder-bottom: none;\r\n}\r\n\r\n.option-avatar {\r\n\twidth: 60rpx;\r\n\theight: 60rpx;\r\n\tborder-radius: 8rpx;\r\n\tmargin-right: 20rpx;\r\n}\r\n\r\n.option-text {\r\n\tfont-size: 32rpx;\r\n\tcolor: #333;\r\n}\r\n\r\n.sheet-cancel {\r\n\ttext-align: center;\r\n\tpadding: 24rpx 0;\r\n\tmargin-top: 20rpx;\r\n\tborder-top: 1rpx solid #f0f0f0;\r\n\tfont-size: 32rpx;\r\n\tcolor: #333;\r\n}\r\n\r\n/* 输入昵称弹窗 */\r\n.modal-mask {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tbackground: rgba(0, 0, 0, 0.5);\r\n\tz-index: 1000;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n.modal {\r\n\twidth: 600rpx;\r\n\tbackground: #fff;\r\n\tborder-radius: 16rpx;\r\n\tpadding: 40rpx;\r\n}\r\n\r\n.modal-title {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: 600;\r\n\tcolor: #333;\r\n\tmargin-bottom: 30rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n.modal-input {\r\n\twidth: 100%;\r\n\tpadding: 20rpx;\r\n\tborder: 1rpx solid #e0e0e0;\r\n\tborder-radius: 8rpx;\r\n\tfont-size: 28rpx;\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.modal-actions {\r\n\tdisplay: flex;\r\n\tgap: 20rpx;\r\n\tjustify-content: flex-end;\r\n}\r\n</style>\r\n\r\n","import MiniProgramPage from 'D:/Hbuilder/HBuilderX.4.76.2025082103/project/first/pages/profile/profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","userService","gameRecordService"],"mappings":"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"}